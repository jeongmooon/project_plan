---
layout : post
title : "[Client] 로그인 암호화"
---

# 클라이언트 측 암호화

이번 프로젝트를 준비하면서 로그인하면서 서버측에 단방향 암호화도 간단하게 해보았는데
생각해보면 클라이언트에서는 간단하게 웹페이지 개발자도구에서 비밀번호가 보이는 것을 보았다.

그래서 비밀번호를 서버측에서 아무리 암호화해도 클라이언트에서 암호화를 하지 않으면 같은
상황일거 같아서 한번 찾고 공부는 해보았다.

클라이언트 측에서 암호화 하는 방법은 간단하게 2가지가 있다고 한다.
그냥 간단하게 HTTPS를 사용하는 것이다.
[SSL](https://namu.wiki/w/TLS?from=SSL)과 [RSA](https://ko.wikipedia.org/wiki/RSA_%EC%95%94%ED%98%B8)방식이라고 한다.

## SSL =/= (HTTPS)

<img src="https://user-images.githubusercontent.com/92348108/146661194-1f45ee37-0a9a-4021-9c75-7d713ba8fa97.PNG" />

SSL(TSL)은 '보안 계층'이라는 독립적인 프로토콜 계층을 만들어 응용 계층과 전송계층 사이에 들어가서 보안을 만드는 것이다. 그래서 SSL(TLS)은 HTTP뿐만 아니라 FTP, SMTP와 같은 다른 프로토콜에도 적용이 가능하다.

HTTPS는 SSL()TSL와 HTTP가 조합된 프로토콜 인것이다. TSL이 SSL의 후속버전이여서 일반적으로 SSL이라고 더 많이 사용이 된다.

### RSA

양방향 비대칭키 암호화로 대표적인 비대칭키 암호화 방식이다.
전에 [암호화한 설명](https://jeongmooon.github.io/nodeH/)에 나왔었던 비대칭으로 암호화할 **"공개키"**와 복호화할 **"개인키"**를 사용한다.
클라이언트가 **공개키**를 가지고 있다가, 정보를 서버에게 보낼때, [스니핑](http://wiki.hash.kr/index.php/%EC%8A%A4%EB%8B%88%ED%95%91)등으로 부터 데이터가 노출되는 것을 막기 위하여, **공개키**를 가지고 클라이언트에서 암호화를 하고, 서버로 전달한다.
암호화 가능한 길이가 245byte여서 긴 문자열을 암호화하는데 적합하지 않아 위에서
말했던 클라이언트 패스워드 암호화에 사용한다는 것 같다.


### AES

AES(Advanced Encryption Standard)라는 것이다.
암호화 하고자하는 문자열을 **대칭키**하나로 암호화하고 복호화 하는 것이다.
때문에 문자열의 길이에 상관 없이 암호화가 가능하다.
하지만 한가지로 모든 것을 해서 RSA보다 보안성은 떨어진다.


### RSA + AES = 합체

<img src="https://user-images.githubusercontent.com/92348108/146661305-b5e69cda-c31b-46c6-9323-e87eaed9de09.png" >

같이 이용하면 안전하게 긴문자열을 암호화하고 보낼 수 있게 된다.

방식은 이렇게 된다.
RSA의 **공개키**, **개인키**를서버에서 생성하고 **공개키**를 클라이언트에
알려준다. 그리고 클라이언트는 **공개키**를 안전한 곳에 보관하고, 서버도 **개인키**를 보관한다.

그 다음에 클라이언트가 서버로 데이터를 보낼 때, AES **대칭키**를 생성한다.
이 **대칭키**로 보낼 데이터를 AES암호화 를한다.

서버가 날아온 데이터를 복호화 하기 위해선 **대칭키**가 필요한데 그냥 보낸다면 AES와 다를 것이 없지만 RSA에서 받은 **공개키**를 이용하여 **대칭키**를 암호화
하는 것이다. 그러면 서버는 AES로 암호화된 데이터와 RSA로 암호화된 **대칭키**를 받고 서버에서 **개인키**를 사용하여 **대칭키**를 복호화 하고 그 **대칭키**로 문자열을 복호화 하는 것이다.


## 결론

정보를 찾아보고 공부하는니까 재미는 있었다. 만들던거 만들다가 시간이 허락되면 (RSA + AES)로 해볼 생각이다. 

